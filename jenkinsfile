pipeline{
    agent any
    parameters:{
        string(name: 'SPEC', defaultValue: 'cypress/e2e/**/**', description:'This is the path of spec files')
        choice(name: 'BROWSER', choices:['chrome','edge','firefox'],description:'Select the browser want to execute scipt in selective browser')
    }
    options:{
        ansiColor('xterm')
    }
    stages{
        stage('Building'){
           steps{
            echo 'building the application'
           }     
        }
        stage('Testing'){
            steps{
                bat "npm i"
                bat "npx cypress run --browser ${BROWSER} --spec ${SPEC}"
            }
        }
        stage("Deploying"){
            steps{
                echo "Deploying the application"
            }
        }
        post{
            always{
                publishHTML([allowMissing: false, alwaysLinkToLastBuild: false, keepAll: false, reportDir: '', reportFiles: 'index.html', reportName: 'HTML Report', reportTitles: '', useWrapperFileDirectly: true])
            }
        }


    }
}